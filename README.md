# Comparitive Testing: Response Comparision between Staging and Production Environments

When SA does the implementation of new behavior, modify existing behavior, or delete the behavior, SA first pushes to staging to test. Comparing the behavior between staging and production is a common task to see if the new version in staging is working as expected. Many times I copy the response in a text file from both environments and use comparison tools like Beyond Compare. It would be great if we can have a side by side comparison of responses between staging and production networks without having to do manual work.

## Usage

```
$python comparitive_testing.py 'http://achuth-autest.edgesuite.net/products.html' ff

+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|          Header           |                         Staging                         |                       Production                        |
+===========================+=========================================================+=========================================================+
|          Status           |                           200                           |                           200                           |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|       Content-Type        |                text/html; charset=UTF-8                 |                text/html; charset=UTF-8                 |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|          Server           |                 Apache/2.2.15 (CentOS)                  |                 Apache/2.2.15 (CentOS)                  |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|       Last-Modified       |              Tue, 15 Mar 2016 22:48:08 GMT              |              Tue, 15 Mar 2016 22:48:08 GMT              |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|           ETag            |                "12da-8d83-52e1e30e89a00"                |                "12da-8d83-52e1e30e89a00"                |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|     X-Check-Cacheable     |                           YES                           |                           YES                           |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|    X-Akamai-Request-ID    |                  4399aa.dd4e4b                   |                 14d29e8f.1ee0026                 |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|   X-Akamai-Transformed    |                   9 4639 0 pmb=mRUM,1                   |                   9 4639 0 pmb=mRUM,1                   |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|           Vary            |                     Accept-Encoding                     |                     Accept-Encoding                     |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|           Date            |          Fri, 21 Aug 2020 10:50:36 GMT           |          Fri, 21 Aug 2020 10:50:38 GMT           |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|      Content-Length       |                      39224                       |                      39226                       |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|                           |                    TCP_MISS from                    |                    TCP_MISS from                    |
|          X-Cache          |       a23-50-54-14.deploy.akamaitechnologies.com        |       a2-21-242-215.deploy.akamaitechnologies.com       |
|                           |          (AkamaiGHost/10.1.2-30498069) (-)           |          (AkamaiGHost/10.1.2-30498069) (-)           |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|                           | /L/16382/942749/1d/gsshappylearning.com/products.h  |             /L/16382/942749/1d/achuth-              |
|        X-Cache-Key        |              tml?%20&akamai-transform=9              |     autest.edgesuite.net/products.html?%20&akamai-      |
|                           |                                                         |                     transform=9                      |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|   X-Cache-Key-Extended-   | /L/16382/942749/1d/gsshappylearning.com/products.h  |             /L/16382/942749/1d/achuth-              |
|     Internal-Use-Only     |         tml?%20&akamai-transform=9 vcd=1456          |     autest.edgesuite.net/products.html?%20&akamai-      |
|                           |                                                         |                 transform=9 vcd=1456                 |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|  X-Akamai-Brotli-Status   |             client does not support brotli              |             client does not support brotli              |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|     X-True-Cache-Key      |      /L/gsshappylearning.com/products.html?%20      |  /L/achuth-autest.edgesuite.net/products.html?%20   |
|                           |                       vcd=1456                       |                       vcd=1456                       |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|      AKA_PM_BASEDIR       |                                                         |                                                         |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|  AKA_PM_CACHEABLE_OBJECT  |                          true                           |                          true                           |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|      AKA_PM_FWD_URL       |                   /products.html?%20                    |                   /products.html?%20                    |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|    AKA_PM_PREFETCH_ON     |                          true                           |                          true                           |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|   AKA_PM_PROPERTY_NAME    |                 achuth-akamaiuniversity                 |                 achuth-akamaiuniversity                 |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|  AKA_PM_PROPERTY_VERSION  |                        31                        |                        23                        |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|     AKA_PM_SR_ENABLED     |                          false                          |                          false                          |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|     AKA_PM_TD_ENABLED     |                          true                           |                          true                           |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|   AKA_PM_TD_MAP_PREFIX    |                           ch2                           |                           ch2                           |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|     ANS_PEARL_VERSION     |                         0.12.0                          |                         0.12.0                          |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
| FASTTCP_RENO_FALLBACK_DIS |                           on                            |                           on                            |
|        ABLE_OPTOUT        |                                                         |                                                         |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|   FOFR_PERF_CIP_BUCKET    |                          2283                           |                          2283                           |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|      FOFR_PERF_HASH       |                         228324                          |                         228324                          |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|   FOFR_PERF_TIME_BUCKET   |                           14                            |                           14                            |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
| G2C_RATE_LIMIT_HRS_MATCHE |                          FALSE                          |                          FALSE                          |
|             D             |                                                         |                                                         |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|      MPULSE_DEFAULT       |                          true                           |                          true                           |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
| OVERRIDE_HTTPS_IE_CACHE_B |                           all                           |                           all                           |
|            UST            |                                                         |                                                         |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|     PCH_SERIAL_PREFIX     |                            a                            |                            a                            |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|    PCH_SITE_SHIELD_MAP    |                     chws.akamai.net                     |                     chws.akamai.net                     |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|      TCP_OPT_APPLIED      |                           low                           |                           low                           |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|     Y_HATS_CIP_BUCKET     |                          9834                           |                          9834                           |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|      Y_HATS_CIP_HASH      |                         983448                          |                         983448                          |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|    Y_HATS_TIME_BUCKET     |                           38                            |                           38                            |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|         X-Serial          |                          16382                          |                          16382                          |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|        Connection         |                       keep-alive                        |                       keep-alive                        |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|                           |                    TCP_MISS from                    |                    TCP_MISS from                    |
|      X-Cache-Remote       |       a23-50-58-47.deploy.akamaitechnologies.com        |      a23-11-206-150.deploy.akamaitechnologies.com       |
|                           |          (AkamaiGHost/10.1.2-30498069) (-)           |          (AkamaiGHost/10.1.2-30498069) (-)           |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
|       Server-Timing       |    cdn-cache; desc=MISS, edge; dur=226, origin;     |    cdn-cache; desc=MISS, edge; dur=109, origin;     |
|                           |                       dur=191                        |                       dur=192                        |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
| X-Akamai-Pragma-Client-IP |                80.67.65.11, 80.67.65.11                 |                80.67.65.11, 80.67.65.11                 |
+---------------------------+---------------------------------------------------------+---------------------------------------------------------+
--------------------------------------------------------------------------------------------------
Staging Headers for Logs:
X-Cache: TCP_MISS from a23-50-54-14.deploy.akamaitechnologies.com (AkamaiGHost/10.1.2-30498069) (-)
X-Akamai-Request-ID: 4399aa.dd4e4b
--------------------------------------------------------------------------------------------------
Production Headers for Logs:
X-Cache: TCP_MISS from a2-21-242-215.deploy.akamaitechnologies.com (AkamaiGHost/10.1.2-30498069) (-)
X-Akamai-Request-ID: 14d29e8f.1ee0026
--------------------------------------------------------------------------------------------------
```
